Doppleganger fight where NPC comes in to help but instead its the enemy & PC's get attacked

Soft launch the doppleganger before this fight: party has to decide who it is... doppleganger vs the original crewman? Sows uncertainty mistrust among the crew. 

Pirate king has valuable item that everyone is after including the monsters as well as the Council. 

The item that the pirate king has is either source of storm godlike power to control weather/environment or has ability to grant a forcefield that can protect from the storm. Pirates have it to bargain with the Council or something. 

The pirates are the underlings of the Dragon. Dragon had tasked them with delivering the item to the dragon